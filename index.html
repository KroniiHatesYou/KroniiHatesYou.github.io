<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
    var localCntSession = 0;
    var localCntSaved = parseInt(localStorage['localCnt'] || '0');
    function rand(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    function num_dot_add(input){
        input = input.toString();
        output = '';
        for(let s = 0; s < input.length; ++s){
            if(s != input.length && s % 3 == 0 && s != 0)
                output = ',' + output;
                output = input[input.length - 1 - s] + output;
        }
        return output
    }

    function Count(sound = false){
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "https://api.countapi.xyz/hit/onlykronii.github.io/visits");
        xhr.responseType = "json";
        xhr.onload = function() {
            if(sound){
                localCntSession += 1;
                localCntSaved += 1;
                localStorage['localCnt'] = localCntSaved + '';
            } else {
                document.getElementById('localCntSaved').innerText = 'Local count this session : ' + num_dot_add(localCntSaved);
            }
            document.getElementById('localCntSession').innerText = 'Local count saved : ' + num_dot_add(localCntSession);
            document.getElementById('visits').innerText = num_dot_add(this.response.value);
        }
        xhr.send();
        lst = ['1.wav','2.wav','3.wav','4.wav','5.wav','6.wav','7.wav','8.wav','9.wav', '10.wav', 
            '11.wav','12.wav','13.wav','14.wav','15.wav','16.wav','17.wav','18.wav','19.wav', '20.wav', 
            '21.wav','22.wav','23.wav','24.wav','25.wav','26.wav','27.wav','28.wav'];
        if(sound){
            var audio = new Audio('Sounds/' + lst[rand(0,lst.length)]);
            audio.play();
            audio.volume = 0.15;
        }
    }
    Count();
    timerId = setInterval(Count, 60000);
    </script>
    <style>
    .wrap{
        height : 100%;
        display : flex;
        justify-content : center;
        align-items : center;
    }
    
    .gwakButton{
        background:#49538c;
        border: none
    }
    
    .gwakButton:not(:hover) .image {
      opacity: 0.7;
    }
    
    .gwakButton:hover .image {
      opacity: 1;
    }
    
    a:link{color:black;}
    a:visited{color:black;}
    a:hover{color:black;}
    a:active{color:black;}
    
    </style>
    </head>
    <body style="background:#49538c;">
        <div class="wrap">
            <div class="box">
               <center>
                    <h1 style="font-family:papyrus; font-size:50px"><span id="visits">-</span></h1>
                    <p style="font-family:papyrus; font-size:30px">Global Gwak Counter</p>
                    <button class="gwakButton" type="button" onclick="Count(true)"><img class="image"  src="button.png" alt="Button"></button><br><br>
                    <p id="localCntSession" style="font-family:papyrus; font-size:30px">Local count this session : 0</p>
                    <p id="localCntSaved" style="font-family:papyrus; font-size:30px">Local count saved : 0</p>
                    <p style="font-family:papyrus; font-size:20px"> Subscribe <a href="https://www.youtube.com/c/OuroKroniiCh">Ouro Kronii Ch. hololive-EN</a><br></p>
                    <p style="font-family:papyrus; font-size:15px"> Illustrated by <a href="https://twitter.com/potatoshura">Shura</a><br></p>
                    <p style="font-family:papyrus; font-size:15px"> Scripted by <a href="https://twitter.com/KyoKMonnoK">Kyono</a><br></p>
               </center>
           </div>
       </div>
    </body>
